#!/usr/bin/env bash

function run() {
  install_append bashrc.append $HOME/.bashrc
  install_template $HOME/.bashrc POTATO_PATH_PLACEHOLDER $POTATO_ROOT/potato
  mkdir $HOME/.potato/enabled
  ln --symbolic --force $POTATO_ROOT/available $HOME/.potato/
}

function install_append() {
  local src=$1
  local dest=$2
  echo "Appending $src to $dest"
  cat $src >> $dest
}

function install_template() {
  local file=$1
  local text1=$2
  local text2=$3
  text1=$(echo "$text1" | sed 's/\//\\\//g')
  text2=$(echo "$text2" | sed 's/\//\\\//g')
  sed -ie "s/$text1/$text2/" $file
}
